YUI.add("moodle-local_mediaserver-series",function(e,t){M.local_mediaserver=M.local_mediaserver||{};var n="Series",r;r=function(){r.superclass.constructor.apply(this,arguments)},e.extend(r,e.Base,{SELECTORS:{ACTION:".table-programs .action-icon",ICON:".iconstate"},CSS:{DIMMED:"dimmed_text"},RESOURCES:{ICONSHOW:M.util.image_url("t/show","core"),ICONHIDE:M.util.image_url("t/hide","core")},AJAX_HANDLER:M.cfg.wwwroot+"/local/mediaserver/guide/links_ajax.php",initializer:function(){e.one("body").delegate("click",this.toggle,this.SELECTORS.ACTION+" "+this.SELECTORS.ICON,this),e.all(this.SELECTORS.ACTION).removeAttribute("href")},toggle:function(t){var n=t.target,r;t.halt(),r={id:parseInt(n.getData("id"),10),finished:parseInt(n.getData("state"),10)^1,sesskey:M.cfg.sesskey},e.io(this.AJAX_HANDLER,{method:"POST",data:r,context:this,on:{success:function(e,t){t.responseText==="OK"&&this.toggle_state(n,r.finished)}}})},toggle_state:function(e,t){var n=e.ancestor("tr");t===0?(n.removeClass(this.CSS.DIMMED),e.setAttrs({src:this.RESOURCES.ICONHIDE,title:M.util.get_string("disable","moodle")})):(n.addClass(this.CSS.DIMMED),e.setAttrs({src:this.RESOURCES.ICONSHOW,title:M.util.get_string("enable","moodle")})),e.setData("state",t)}},{NAME:n,ATTRS:{}}),M.local_mediaserver.series=function(e){return new r(e)}},"@VERSION@",{requires:["base","node","node-event-delegate","io"]});
