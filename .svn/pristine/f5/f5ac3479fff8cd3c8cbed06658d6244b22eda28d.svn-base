YUI.add("moodle-local_mediaserver-series",function(e,t){M.local_mediaserver=M.local_mediaserver||{},M.local_mediaserver.series={SELECTORS:{ICON:".table-programs .action-icon .iconstate"},CSS:{DIMMED:"dimmed_text"},RESOURCES:{ICONSHOW:M.util.image_url("t/show","core"),ICONHIDE:M.util.image_url("t/hide","core")},AJAX_HANDLER:M.cfg.wwwroot+"/local/mediaserver/guide/links_ajax.php",init:function(){e.one("body").delegate("click",this.toggle,this.SELECTORS.ICON,this)},toggle:function(t){var n=t.target,r={};t.halt(),r={id:parseInt(n.getData("id"),10),finished:parseInt(n.getData("state"),10)^1,sesskey:M.cfg.sesskey},e.io(this.AJAX_HANDLER,{method:"POST",data:r,context:this,on:{success:function(e,t){t.responseText==="OK"&&this.toggle_state(n,r.finished)}}})},toggle_state:function(e,t){var n=e.ancestor("tr"),r=e.ancestor("a"),i=r.get("href");t===0?(n.removeClass(this.CSS.DIMMED),e.setAttrs({src:this.RESOURCES.ICONHIDE,title:M.util.get_string("disable","moodle")})):(n.addClass(this.CSS.DIMMED),e.setAttrs({src:this.RESOURCES.ICONSHOW,title:M.util.get_string("enable","moodle")})),e.setData("state",t);var s=t^1;r.setAttribute("href",i.replace(/finished=([\d]+)/ig,"finished="+s))}}},"@VERSION@",{requires:["base","node","node-event-delegate","io"]});
