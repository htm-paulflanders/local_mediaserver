define(["jquery","core/ajax","core/notification","core/str","core/url"],function(a,b,c,d,e){var f={ACTION:".local-mediaserver-links-table .action-icon",ICON:".iconstate"},g={DIMMED:"dimmed_text"},h=function(d){var e=[],f=a(d.target),g=Number(!f.data("finished"));d.preventDefault(),e=b.call([{methodname:"local_mediaserver_update_series",args:{id:f.data("id"),finished:g}}]),a.when.apply(a.when,e).then(function(){i(f,g)}).fail(c.exception)},i=function(a,b){var f=[{key:"enable",component:"moodle"},{key:"disable",component:"moodle"}];d.get_strings(f).then(function(c){var d=a.closest("tr");0===b?a.attr({src:e.imageUrl("t/hide","core"),title:c[1]}):a.attr({src:e.imageUrl("t/show","core"),title:c[0]}),d.toggleClass(g.DIMMED),a.data("finished",b)}).fail(c.exception)};return{init:function(){a("body").delegate(f.ACTION+" "+f.ICON,"click",h),a(f.ACTION).removeAttr("href")}}});