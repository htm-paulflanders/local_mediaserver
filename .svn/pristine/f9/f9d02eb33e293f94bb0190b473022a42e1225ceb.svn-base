YUI.add("moodle-local_mediaserver-calendar",function(e,t){M.local_mediaserver=M.local_mediaserver||{};var n="Calendar",r;r=function(){r.superclass.constructor.apply(this,arguments)},e.extend(r,e.Base,{SELECTORS:{ICON:"#calendar-popup-link",POPUP:"#calendar-popup-container",MONTH:'select[name="monthselect"] option:checked',YEAR:'select[name="yearselect"] option:checked',SUBMIT:"#calendar-popup-button"},popup:null,expression:/([?&]t=)[\d]+/i,initializer:function(){this.popup=e.one(this.SELECTORS.POPUP),e.on("click",this.toggle,this.SELECTORS.ICON,this),e.on("click",this.submit,this.SELECTORS.SUBMIT,this),e.one("body").on("click",this.close,this)},toggle:function(e){var t=e.target.getXY();e.halt(),this.popup.setStyle("left",t[0]-100),this.popup.setStyle("top",t[1]+20),this.popup.toggleView()},close:function(e){if(e.target.ancestor(this.SELECTORS.POPUP,!0))return;this.popup.hide()},submit:function(e){e.halt();var t=this.popup.one(this.SELECTORS.MONTH).getAttribute("value"),n=this.popup.one(this.SELECTORS.YEAR).getAttribute("value"),r=new Date(n,t-1,1),i=Math.round(r.getTime()/1e3),s=window.location.href.split("#")[0];s.search(this.expression)>-1?window.location.href=s.replace(this.expression,"$1"+i):window.location.href=s+"?t="+i}},{NAME:n,ATTRS:{}}),M.local_mediaserver.calendar=function(e){return new r(e)}},"@VERSION@",{requires:["base","node"]});
