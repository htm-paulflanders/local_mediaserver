define(["jquery","core/templates","core/notification"],function(a,b,c){var d={PROGRAMS:".guide-channel li:not(.icon) a",POPUP:"local-mediaserver-popup"},e={POPUP:"local_mediaserver/popup"},f=null,g=200,h=function(b){var c=a(b.target),d=c.offset(),e=c.data("program");f.css({left:d.left+10,top:d.top+16}),f.html(e.time+"<br />"+e.description),f.clearQueue().delay(g).fadeIn(g,function(){f.animate({scrollTop:0},g)})},i=function(a){var b={left:a.pageX,top:a.pageY},c=f.offset();return b.left>=c.left&&b.left<=c.left+f.width()&&b.top>=c.top&&b.top<=c.top+f.height()?a.preventDefault():void f.clearQueue().delay(g).fadeOut(g)};return{init:function(g){if(f=a("#"+d.POPUP),0===f.length){var j={id:d.POPUP};b.render(e.POPUP,j).done(function(b){f=a(b).on("mouseleave",i),a("body").append(f)}).fail(c.exception)}g=g||d.PROGRAMS,a(g).hover(h,i)}}});