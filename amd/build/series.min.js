define(["jquery","core/ajax","core/notification","core/str","core/templates"],function(a,b,c,d,e){var f={ACTION:".local-mediaserver-links-table .action-series",ICON:".icon"},g={DIMMED:"dimmed_text"},h=function(d){var e,f=a(d.target).parent(),g=f.data("series");g.finished=+!Number(g.finished),d.preventDefault(),e=b.call([{methodname:"local_mediaserver_update_series",args:{id:g.id,finished:g.finished}}]),e[0].then(function(){i(f,g)})["catch"](c.exception)},i=function(a,b){var h=[{key:"enable",component:"moodle"},{key:"disable",component:"moodle"}];d.get_strings(h).then(function(a){var c,d;return 1==b.finished?(c="t/show",d=a[0]):(c="t/hide",d=a[1]),e.renderPix(c,"core",d)}).then(function(c){var d=a.closest("tr");d.toggleClass(g.DIMMED),a.data("series",b),e.replaceNode(a.find(f.ICON),c,"")})["catch"](c.exception)};return{init:function(){a("body").delegate(f.ACTION,"click",h),a(f.ACTION).removeAttr("href")}}});